# cygwin 的喜与悲

## Happiness

安装cygwin可以在windows下面使用Linux命令了，看起来很给力，实际也是很给力。最喜欢的就是可以反汇编了：objdump

虽然很少使用，但是这个功能传说必不可少，汇编不懂也是硬伤啊！当然了，linux下面的命令行浏览文件夹什么的感觉比dos窗口舒服

命令好像容易记忆一些，反正我是使用习惯一些，强制删除文件什么的，很轻松。但是其他强大功能实际上，都被我给浪费了吧

## Buskin

第一次感觉cygwin坑爹就是这次试验了---读取目录下面的文件，输出其文件名。百度看到了很多程序和方法，copy代码，检验了，发现各种问题
#### Problem

    第一个，system()函数没有办法使用了，报sh错误什么的，不能识别其中参数

    第二个，(最坑爹的问题)弄了我一下午，硬是没有解决，但是被我找出了问题的原因。

        struct _finddata_t 没有定义 error: storage size of 'fileinfo' isn't known
        网上各种大牛的博客分享了解决办法，但是没有找到正确的解法，也看见CSDN上的问题贴至今未解的。

        方法一：自己定义struct _finddata_t
        很多大牛博客解析了这个数据结构，成员变量什么的都有，好像很容易自己定义，写一个数据结构而已，当初我就是这么想的
        试验：发现_fsize_t未定义，使用 unsigned long 可以解决的，但是还有更加恐怖的问题：
        三个读取文件的函数根本没有定义，这个不会也要自己实现吧，实在是不会。
        这是cygwin最坑爹的地方，因为它的src/include/里面有一个"io.h"文件，如果没有这个头文件，#include <io.h>就会报错，不至于绕这么大的圈子！
        然后打开文件一看，内容很奇怪，和wingw里面的"io.h"头文件完全不一样，确实没有相关的数据结构定义，更加不用说函数了。

        方法二：有的同志说发现src/include/里面没有"io.h"文件，但是include/sys/里面有一个"io.h"，使用 #include <sys/io.h>，或者复制该文件到
        include/里面就可以成功，这个我没有验证，不知道实际情况。
        因为我使用的版本cygwin里面 sys/根本没有"io.h"，但是我后来找到了Cygwin/usr/i686-pc-mingw32/sys-root/mingw/include里面有一个"io.h"
        最重要的是里面有 struct _finddata_t 相关的内容 struct _finddata32_t的东西，然而在那个文件里面，无法直接include，我不知道用什么办法调用
        该头文件，只能复制"io.h"到了sys/里面，(我是把wingw文件一起复制的，担心不够用，结果还是不够用！！)虽然可以调用，但是还是不能识别，
        直接将"io.h"放到自己的工程也是不行。
        试验后明白，应该是没有函数定义的实现，只有头文件是没有用的，网上想找相关的库文件，发现没有资源，就只能放弃了。

        网上的大体解决方法就这两类的，但是都不能解决我的问题，好像很多同志和我一样，一直苦等解决方法.

    第三个，也是很坑爹的，codeblocks不能输出中文，但是很奇怪eclipse可以输出中文？
        网上也是各种方法，都是试验了，也了解了所谓的问题本质。各种修改编码、解码的设置，GBK 936 UTF-8 没有任何作用，一直都是乱码，终于
        感觉出cygwin不对劲了，因为我笔记本电脑上使用codeblocks，只要设置编码问题，是可以输出中文的，而且我也使用了cygwin。但是这肯定是
        cygwin的问题。因为我在windows命令提示符里面倒腾了很久，发现一直不能识别中文名文件...也是各种方法设置什么活页码。

## 本质原因：

    cygwin对windows的支持，还不完善的原因，所以很多windows的东西支持不了，根本不能正常使用，或者是使用。

#### Solving
    codeblocks解决struct _finddata_t 未定义的问题，或者直接说，没有解决相关的"io.h"文件方法：

    不能使用cygwin提供的gcc编译器，直接使用wingw编译器，然后就什么问题都没有了，根本没有任何警告、错误，直接就通过了编译

    我的方法时卸载了odeblocks，安装了一个自带wingw的版本，然后修改编译器的配置，gdb的配置，终于给解决了这个网上一直找不到答案，
    说法千奇百怪的问题。
#### Settings
        codeblocks 重新配置编译器：
        settings -> compiler -> global compiler settings -> toolchain executables(在中间) 设置相关路径和工具即可，就是wingw/bin里面的东西

        codeblocks 重新配置gdb:
        settings -> Debugger settings -> GDB/CDB debugger -> Default 设置路径


    终于受不了cygwin，就给卸载了，后来发现其实切断cygwin与命令提示符的链接就可以。

        关闭cygwin控制dos命令窗口的办法，很简单，将其路径的环境变量删除就好了，找不到它的命令，总不能干扰程序执行了吧。想使用它就只能
        自己一步一步的 cd 进去了，但是值得啊，不会影响其他软件的正常工作了。

        试验：成功了！
            codeblocks控制台可以输出中文、可以识别system()函数、etc


#### Gains

    当你遇到很奇怪的问题时，然后看见网上也有这样的问题时，发现人家提供了各种解决办法，然后还是不能解决时，只能说明一个问题，问题看似一样，
    实际上有很多区别，比如开发工具的版本问题，机器版本等，所以很多问题按照一些现成的方法，是不能解决的。

    这个时候，最好检查自己的开发环境，看看安装了那些软件，配置了些什么功能很牛的东西，功能越牛，自然影响就越大了！如果发现环境配置等和别人
    遇到此问题时的配置不一样，那么其方法很可能只有帮助你思考的作用，而不能有直接作用。最简单办法，使用别人一样的工具和配置，然后继续开发，
    这么做代价比较大，解决问题简单。

    所以万能的办法，还是了解你自己的机器，了解你使用的软件工具的功能和特征，然后才能很好的使用它们！

###### 提示：开发工具环境
    windows 7
    cygwin 2.2.1-1 (cygcheck -c 查看全部，cygcheck -c cygwin查看cygwin版本号)
    codeblocks 13.12


